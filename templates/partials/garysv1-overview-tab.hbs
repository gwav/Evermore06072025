<section class="garysv1-abilities-section">
    <div class="garysv1-resolution-frame">
        <div class="garysv1-abilities-header">
            {{#if actor.system.creationMode}}
                <h3>Attributes</h3>
            {{else}}
                <h3 class="garysv1-resolution-title">Resolution</h3>
            {{/if}}
        </div>
        <div class="garysv1-abilities-list">
        <!-- Strength -->
        <div class="garysv1-ability-container">
            <div class="garysv1-ability-row ldoa-attribute-roll-icon" data-actor="{{actor.id}}" data-attribute="strength" 
                 title="{{#if actor.system.creationMode}}Roll for Strength (Character Creation){{else}}Roll Strength Resolution (Current: {{actor.system.calculated.strength}}, Beginning: {{actor.system.beginning.strength}}){{/if}}">
                <input type="number" name="system.calculated.strength" value="{{actor.system.calculated.strength}}" 
                       class="garysv1-ability-value" title="Current Strength Value" {{#if actor.system.creationMode}}readonly{{/if}} />
                <span class="garysv1-ability-name">{{localize "ldoa.attributes.strength.long"}}</span>
                <i class="fas fa-dice-d20 garysv1-ability-icon"></i>
            </div>
            {{#unless actor.system.creationMode}}
            <div class="garysv1-ability-bonuses">
                <div class="garysv1-bonus-box">
                  <div class="garysv1-bonus-frame" title="Beginning Value">
                    <span class="garysv1-bonus">{{actor.system.beginning.strength}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="Creation Bonus">
                    <span class="garysv1-bonus">{{actor.system.creationBonus.strength}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="In-Game Bonus (includes boons)">
                    <span class="garysv1-bonus">{{math actor.system.inGameBonus.strength '+' boonBonuses.strength}}</span>
                  </div>
                </div>
            </div>
            {{/unless}}
        </div>

        <!-- Dexterity -->
        <div class="garysv1-ability-container">
            <div class="garysv1-ability-row ldoa-attribute-roll-icon" data-actor="{{actor.id}}" data-attribute="dexterity" 
                 title="{{#if actor.system.creationMode}}Roll for Dexterity (Character Creation){{else}}Roll Dexterity Resolution (Current: {{actor.system.calculated.dexterity}}, Beginning: {{actor.system.beginning.dexterity}}){{/if}}">
                <input type="number" name="system.calculated.dexterity" value="{{actor.system.calculated.dexterity}}" 
                       class="garysv1-ability-value" title="Current Dexterity Value" {{#if actor.system.creationMode}}readonly{{/if}} />
                <span class="garysv1-ability-name">{{localize "ldoa.attributes.dexterity.long"}}</span>
                <i class="fas fa-dice-d20 garysv1-ability-icon"></i>
            </div>
            {{#unless actor.system.creationMode}}
            <div class="garysv1-ability-bonuses">
                <div class="garysv1-bonus-box">
                  <div class="garysv1-bonus-frame" title="Beginning Value">
                    <span class="garysv1-bonus">{{actor.system.beginning.dexterity}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="Creation Bonus">
                    <span class="garysv1-bonus">{{actor.system.creationBonus.dexterity}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="In-Game Bonus (includes boons)">
                    <span class="garysv1-bonus">{{math actor.system.inGameBonus.dexterity '+' boonBonuses.dexterity}}</span>
                  </div>
                </div>
            </div>
            {{/unless}}
        </div>

        <!-- Constitution -->
        <div class="garysv1-ability-container">
            <div class="garysv1-ability-row ldoa-attribute-roll-icon" data-actor="{{actor.id}}" data-attribute="constitution" 
                 title="{{#if actor.system.creationMode}}Roll for Constitution (Character Creation){{else}}Roll Constitution Resolution (Current: {{actor.system.calculated.constitution}}, Beginning: {{actor.system.beginning.constitution}}){{/if}}">
                <input type="number" name="system.calculated.constitution" value="{{actor.system.calculated.constitution}}" 
                       class="garysv1-ability-value" title="Current Constitution Value" {{#if actor.system.creationMode}}readonly{{/if}} />
                <span class="garysv1-ability-name">{{localize "ldoa.attributes.constitution.long"}}</span>
                <i class="fas fa-dice-d20 garysv1-ability-icon"></i>
            </div>
            {{#unless actor.system.creationMode}}
            <div class="garysv1-ability-bonuses">
                <div class="garysv1-bonus-box">
                  <div class="garysv1-bonus-frame" title="Beginning Value">
                    <span class="garysv1-bonus">{{actor.system.beginning.constitution}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="Creation Bonus">
                    <span class="garysv1-bonus">{{actor.system.creationBonus.constitution}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="In-Game Bonus (includes boons)">
                    <span class="garysv1-bonus">{{math actor.system.inGameBonus.constitution '+' boonBonuses.constitution}}</span>
                  </div>
                </div>
            </div>
            {{/unless}}
        </div>

        <!-- Intelligence -->
        <div class="garysv1-ability-container">
            <div class="garysv1-ability-row ldoa-attribute-roll-icon" data-actor="{{actor.id}}" data-attribute="intelligence" 
                 title="{{#if actor.system.creationMode}}Roll for Intelligence (Character Creation){{else}}Roll Intelligence Resolution (Current: {{actor.system.calculated.intelligence}}, Beginning: {{actor.system.beginning.intelligence}}){{/if}}">
                <input type="number" name="system.calculated.intelligence" value="{{actor.system.calculated.intelligence}}" 
                       class="garysv1-ability-value" title="Current Intelligence Value" {{#if actor.system.creationMode}}readonly{{/if}} />
                <span class="garysv1-ability-name">{{localize "ldoa.attributes.intelligence.long"}}</span>
                <i class="fas fa-dice-d20 garysv1-ability-icon"></i>
            </div>
            {{#unless actor.system.creationMode}}
            <div class="garysv1-ability-bonuses">
                <div class="garysv1-bonus-box">
                  <div class="garysv1-bonus-frame" title="Beginning Value">
                    <span class="garysv1-bonus">{{actor.system.beginning.intelligence}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="Creation Bonus">
                    <span class="garysv1-bonus">{{actor.system.creationBonus.intelligence}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="In-Game Bonus (includes boons)">
                    <span class="garysv1-bonus">{{math actor.system.inGameBonus.intelligence '+' boonBonuses.intelligence}}</span>
                  </div>
                </div>
            </div>
            {{/unless}}
        </div>

        <!-- Wisdom -->
        <div class="garysv1-ability-container">
            <div class="garysv1-ability-row ldoa-attribute-roll-icon" data-actor="{{actor.id}}" data-attribute="wisdom" 
                 title="{{#if actor.system.creationMode}}Roll for Wisdom (Character Creation){{else}}Roll Wisdom Resolution (Current: {{actor.system.calculated.wisdom}}, Beginning: {{actor.system.beginning.wisdom}}){{/if}}">
                <input type="number" name="system.calculated.wisdom" value="{{actor.system.calculated.wisdom}}" 
                       class="garysv1-ability-value" title="Current Wisdom Value" {{#if actor.system.creationMode}}readonly{{/if}} />
                <span class="garysv1-ability-name">{{localize "ldoa.attributes.wisdom.long"}}</span>
                <i class="fas fa-dice-d20 garysv1-ability-icon"></i>
            </div>
            {{#unless actor.system.creationMode}}
            <div class="garysv1-ability-bonuses">
                <div class="garysv1-bonus-box">
                  <div class="garysv1-bonus-frame" title="Beginning Value">
                    <span class="garysv1-bonus">{{actor.system.beginning.wisdom}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="Creation Bonus">
                    <span class="garysv1-bonus">{{actor.system.creationBonus.wisdom}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="In-Game Bonus (includes boons)">
                    <span class="garysv1-bonus">{{math actor.system.inGameBonus.wisdom '+' boonBonuses.wisdom}}</span>
                  </div>
                </div>
            </div>
            {{/unless}}
        </div>

        <!-- Charisma -->
        <div class="garysv1-ability-container">
            <div class="garysv1-ability-row ldoa-attribute-roll-icon" data-actor="{{actor.id}}" data-attribute="charisma" 
                 title="{{#if actor.system.creationMode}}Roll for Charisma (Character Creation){{else}}Roll Charisma Resolution (Current: {{actor.system.calculated.charisma}}, Beginning: {{actor.system.beginning.charisma}}){{/if}}">
                <input type="number" name="system.calculated.charisma" value="{{actor.system.calculated.charisma}}" 
                       class="garysv1-ability-value" title="Current Charisma Value" {{#if actor.system.creationMode}}readonly{{/if}} />
                <span class="garysv1-ability-name">{{localize "ldoa.attributes.charisma.long"}}</span>
                <i class="fas fa-dice-d20 garysv1-ability-icon"></i>
            </div>
            {{#unless actor.system.creationMode}}
            <div class="garysv1-ability-bonuses">
                <div class="garysv1-bonus-box">
                  <div class="garysv1-bonus-frame" title="Beginning Value">
                    <span class="garysv1-bonus">{{actor.system.beginning.charisma}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="Creation Bonus">
                    <span class="garysv1-bonus">{{actor.system.creationBonus.charisma}}</span>
                  </div>
                  <div class="garysv1-bonus-frame" title="In-Game Bonus (includes boons)">
                    <span class="garysv1-bonus">{{math actor.system.inGameBonus.charisma '+' boonBonuses.charisma}}</span>
                  </div>
                </div>
            </div>
            {{/unless}}
        </div>
    </div>

</n-    <!-- Roll All Attributes Button -->
    <div class="garysv1-roll-all-container">
        <button type="button" class="garysv1-roll-all-button" data-actor="{{actor.id}}" 
                title="Roll all attribute tests">
            <i class="fas fa-dice-d20"></i> Roll All Attributes
        </button>
    </div>

    <!-- Persona & Languages Row -->
    <div class="garysv1-persona-languages-row" style="display: flex; gap: 2em; align-items: flex-start;">
        <div class="garysv1-persona-box" style="flex: 1;">
            <h3 class="garysv1-persona-title">Persona</h3>
            <div class="garysv1-persona-content">
                <div class="garysv1-persona-line">
                    <span class="garysv1-persona-label">Kin:</span>
                    <span class="garysv1-persona-value">
                        {{#if actor.system.kin}}
                            {{capitalize actor.system.kin}}
                        {{else}}
                            Human
                        {{/if}}
                    </span>
                </div>
                <div class="garysv1-persona-line">
                    <span class="garysv1-persona-label">Background:</span>
                    <span class="garysv1-persona-value">
                        {{#if actor.system.background}}
                            {{capitalize actor.system.background}}
                        {{else}}
                            Barbarian
                        {{/if}}
                    </span>
                </div>
                <div class="garysv1-persona-line">
                    <span class="garysv1-persona-label">Origin:</span>
                    <span class="garysv1-persona-value">
                        {{#if actor.system.origin}}
                            {{capitalize actor.system.origin}}
                        {{else}}
                            None
                        {{/if}}
                    </span>
                </div>
            </div>
        </div>
        <div class="garysv1-languages-box" style="flex: 1;">
            <h3 class="garysv1-persona-title">Languages</h3>
            <div class="garysv1-persona-content">
                <div class="garysv1-persona-line">
                    <span class="garysv1-persona-label">Universal:</span>
                    <span class="garysv1-persona-value">{{localize "ldoa.languages.thyrenian.name"}}</span>
                </div>
                {{#each languageSlots.automaticLanguages}}
                <div class="garysv1-persona-line">
                    <span class="garysv1-persona-label">Automatic:</span>
                    <span class="garysv1-persona-value">{{localize (languageLocalizePath "ldoa.languages" this "name")}}</span>
                </div>
                {{/each}}
                {{#each actor.system.languages}}
                {{#if this}}
                <div class="garysv1-persona-line">
                    <span class="garysv1-persona-label">Selected:</span>
                    <span class="garysv1-persona-value">{{localize (languageLocalizePath "ldoa.languages" this "name")}}</span>
                </div>
                {{/if}}
                {{/each}}
                {{#if (and (not (some actor.system.languages)) (eq languageSlots.automaticLanguages.length 0))}}
                <div class="garysv1-persona-line">
                </div>
                {{/if}}
            </div>
        </div>
    </div>
</section>